<style>
    .selectWidth {
        width: 400px;
    }


</style>
<script>

    $(document).ready(function () {
        getSelectMajor();  //Select major ตอนแก้ไขใน table
        getSelect();   // Select major ตอน add user
        president();
    });

    function president() {
        getFacultyUser();  //get ประธานคณะ
        getSectorUser(); //get ประธานภาค
        getMajorUser(); //get ประธานสาขา
    }

    //    $(function () {
    //        $('html').on('click', function () {
    //$.fn.editable.defaults.mode = 'inline';
    //            $('.update').editable({
    //                url: 'userUpdate.php',
    //                type: 'text',
    //                title: 'Enter username'
    //            });
    //        });
    //    })

    ///////////////////////////////////////////////USER TABLE////////////////////////////////////////////////////////////////

    var $table = $('#table');
    var majors;
    var userData;


    // Select major ตอน add user
    function getSelect() {
        $.ajax({
            type: 'POST',
            url: 'userDAO.php',
            data: {func: 'getSelect', val: user.faculty_id},
            dataType: 'json',
            success: function (response) {
                var select = "";
                $.each(response, function (i, sector) {
                    select += "<optgroup label=" + sector.sector_id + ">";
//                    console.log(sector.sector_id);
                    if (Array.isArray(sector.major_id) == true) {              //ถ้า major_id เป็น array จะเข้าไปวนจนครบจำนวน index
                        $.each(sector.major_id, function (j, major) {
//                            console.log(major);
                            select += " <option value=" + major + ">" + major + "</option>";
                        });
                    } else {                                                  //ถ้าไม่เป็นหรือภาควิชามีแค่สาขาเดียว
                        console.log(sector.major_id);
                        select += "<option value=" + sector.major_id + ">" + sector.major_id + "</option>";
                    }
                    select += "</optgroup>";
                });
//                console.log(select);
                $("#select").html(select);
                $("#select").selectpicker('refresh');
            }
        });
    }

    //data Select major ตอน edit user
    function getSelectMajor() {
        $.ajax({
            type: 'POST',
            url: 'userDAO.php',
            data: {func: 'getSelectMajor', val: user.faculty_id},
            dataType: 'json',
            success: function (response) {
                majors = response;
                getUser();
            }
        });
    }

    //get user data
    function getUser() {
        $.ajax({
            type: 'POST',
            url: 'userDAO.php',
            data: {func: 'getUser', val: user.faculty_id},
            dataType: 'json',
            success: function (response) {
                userData = response;
                userTable();
                //                $.each(response, function (i, user) {
//                    body += "<tr>" +
//                            "<td>" + (i + 1) + "</td>" +
//                            "<td><a href='#' class='update' data-name='name' data-pk=" + user.user_id + ">" + user.name + "</a></td>" +
//                            "<td><a href='#' class='update' data-name='surname' data-pk=" + user.user_id + ">" + user.surname + "</a></td>" +
//                            "<td><a href='#' class='update' data-name='user_id' data-pk=" + user.user_id + ">" + user.user_id + "</a></td>" +
//                            "</tr>";
//                });
//                $("tbody").html(body);
//
//                $('#table').bootstrapTable();
//                $.fn.editable.defaults.mode = 'inline';
//                $('.update').editable({
//                    url: 'userUpdate.php',
//                    type: 'text',
//                    title: 'Enter username'
//                });
            },
            error: function () {
                alert("Don't have any data.");
            }
        });
    }

    //user table
    function userTable() {
        $table.bootstrapTable({
            columns: [{
                field: 'state',
                checkbox: true
            }, {
                title: 'ลำดับ',
                formatter: function (value, row, index) {
                    return [index+1].join('  ');
                },
                align: 'center'
            }, {
                field: 'name',
                title: 'ชื่อ',
                sortable: true,
                editable: {
                    type: 'text',
                    title: 'Enter username',
                    url: 'userDAO.php',
                    name: 'name',
                    params: function func(params) {
                        params.func = 'updateUser';
                        return params;
                    },
                    success: function () {
                        president();
                        getUser();
                    }
                }
            }, {
                field: 'surname',
                title: 'นามสกุล',
                sortable: true,
                //width: '300px',
                editable: {
                    type: 'text',
                    title: 'Enter surname',
                    url: 'userDAO.php',
                    name: 'surname',
                    params: function func(params) {
                        params.func = 'updateUser';
                        return params;
                    },
                    success: function () {
                        president();
                        getUser();
                    }
                }
            }, {
                field: 'user_id',
                title: 'อีเมล',
                sortable: true,
                editable: {
                    type: 'text',
                    title: 'Enter email',
                    url: 'userDAO.php',
                    name: 'user_id',
                    params: function func(params) {
                        params.func = 'updateUser';  //เพิ่ม params func เข้าไป
                        return params;
                    },
                    success: function () {
                        president();
                        getUser();
                    }
                }
            }, {
                field: 'sector_id',
                title: 'ภาควิชา',
                sortable: true,

            }, {
                field: 'major_id',
                title: 'สาขา',
                sortable: true,
                editable: {
                    type: 'select2',
                    title: 'Select major',
                    url: 'userDAO.php',
                    name: 'major_id',
                    inputclass: 'selectWidth',
                    source: majors,
                    params: function func(params) {
                        params.func = 'updateUser';
                        params.majorIdAdmin = user.major_id; //major_id ของ admin
                        return params;
                    },
                    success: function () {
                        president();
                        getUser();
                    }
                }
            }, {
                field: 'sector_admin',
                title: 'ผู้ดูแลระบบของภาค',
                align: 'center',
                cellStyle:function cellStyle(value, row, index, field) {
                    return {
                        css: {"font-size": "150%"}
                    };
                },
                sortable: true,
                editable: {
                    type: 'select',
                    title: 'Select status',
                    url: 'userDAO.php',
                    name: 'sector_admin',
                    source: [
                        {value: 1, text: '✔'},
                        {value: 0, text: '-'}
                    ],
                    params: function func(params) {
                        params.func = 'updateUser';
                        return params;
                    },
                    success: function () {
                        getUser();
                    }
                }
            }, {
                field: 'major_admin',
                title: 'ผู้ดูแลระบบของสาขา',
                align: 'center',
                cellStyle:function cellStyle(value, row, index, field) {
                    return {
                        css: {"font-size": "150%"}
                    };
                },
                sortable: true,
                editable: {
                    type: 'select',
                    title: 'Select status',
                    url: 'userDAO.php',
                    name: 'major_admin',

                    source: [
                        {value: 1, text: '✔'},
                        {value: 0, text: '-'}
                    ],
                    params: function func(params) {
                        params.func = 'updateUser';
                        return params;
                    },
                    success: function () {
                        getUser();
                    }
                }
            }
            ],
//            data: userData
        });
        $table.bootstrapTable('load', userData);
    }

    //add user
    $(document).ready(function () {
        $("#addUser").submit(function () {
//            var data = $(this).serialize() + '&' + $.param({func: 'addUser', majorId: user.major_id});
            var data = $(this).serialize() + '&' + $.param({func: 'addUser'});
//            console.log(data);
//            $.post("userDAO.php", data, function () {
//                getUser();
//            });

            $.ajax({
                type: 'POST',
                url: 'userDAO.php',
                data: data,
                dataType: 'html',
                success: function (response) {
//                    console.log(response);
                    if (response == "success") {
                        president();
                        getUser();
                    } else {
                        var error = "<div id=\"alert\" class=\"alert alert-danger alert-dismissible col-md-11 top-15\" role=\"alert\">" +
                                "<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">" +
                                "<span aria-hidden=\"true\">&times;</span>" +
                                "</button>" +
                                "<span class=\"glyphicon glyphicon-remove-sign\" aria-hidden=\"true\"></span> " +
                                "<strong>Error!</strong> " + response +
                                "</div>";

                        $("#error").append(error);
                    }
                }
            });
            return false;
        });
    });

    var $remove = $('#remove');

    //remove user
    $(document).ready(function () {
        $table.on('check.bs.table uncheck.bs.table check-all.bs.table uncheck-all.bs.table', function () {
            $remove.prop('disabled', !$table.bootstrapTable('getSelections').length);
        });
        $remove.click(function () {
            var data = $table.bootstrapTable('getSelections');
            $.ajax({
                type: 'POST',
                url: 'userDAO.php',
                data: {func: 'removeUser', data: data},
                success: function () {
                    president();
                    getUser();
                }
            });
            $remove.prop('disabled', true);
//            console.log(JSON.stringify($table.bootstrapTable('getSelections')));
//            console.log($table.bootstrapTable('getSelections'));
        });
    });

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


    ////////////////////////////////////////////////////กำหนดผู้บริหารคณะ//////////////////////////////////////////////////////
    var facultyUser;
    var facultyPosition;
    var facultyUserPosition;

    //ผู้บริหารคณะ
    function getFacultyUser() {
        $.ajax({
            type: 'POST',
            url: 'userDAO.php',
            data: {func: 'getFacultyUser', val: user.faculty_id},
            dataType: 'json',
            success: function (response) {
                facultyUser = response;
//                console.log(JSON.stringify(facultyUser));

                var select = "";
                $.each(facultyUser,function (i,facUser) {
                    select += "<option value=" + facUser.id + ">" + facUser.text + "</option>";
                });
                $("#facultyUserSelect").html(select);
                $("#facultyUserSelect").selectpicker('refresh');
                getPosition();
            }
        })
    }

    //ต่ำแหน่งผู้บริหารคณะ
    function getPosition(){
        $.ajax({
            type: 'POST',
            url: 'userDAO.php',
            data: {func: 'getPosition', val: user.faculty_id},
            dataType: 'json',
            success: function (response) {
                facultyPosition = response;

                var select = "";
                $.each(facultyPosition,function (i,position) {
                    select += "<option value=" + position.id + ">" + position.text + "</option>";
                });
                $("#positionSelect").html(select);
                $("#positionSelect").selectpicker('refresh');
                getFaculty();
            }
        });
    }

    //คณะ
    $faculty = $('#fac_pre');
    $positionRemove = $('#positionRemove');

    function getFaculty() {
        $.ajax({
            type: 'POST',
            url: 'userDAO.php',
            data: {func: 'getFaculty', val: user.faculty_id},
            dataType: 'json',
            success: function (response) {
                facultyUserPosition = response;
                $faculty.bootstrapTable({
                    columns: [{
                        field: 'state',
                        checkbox: true
                    }, {
                        field: 'faculty_id',
                        title: 'คณะ',
                        width: '43%'
                    }, {
                        field: 'user_id',
                        title: 'ผู้บริหารคณะ',
                        editable: {
                            type: 'select2',
                            title: 'Select faculty president',
                            url: 'userDAO.php',
                            emptytext: 'ไม่มีผู้บริหารคณะ',
                            inputclass: 'selectWidth',
                            source: function () {
                                return facultyUser;
                            },
                            params: function func(params) {
                                getFacultyPk(params);
                                params.func = 'updateFacultyPosition';
                                return params;
                            },
                            success: function () {
                                getFacultyUser();
                            }
                        }

                    },{
                        field: 'position',
                        title: 'ตำแหน่ง',
                        editable: {
                            type: 'select2',
                            title: 'Select position',
                            url: 'userDAO.php',
                            emptytext: 'ไม่มีผู้บริหารคณะ',
                            inputclass: 'selectWidth',
                            source: function () {
                                return facultyPosition;
                            },
                            params: function func(params) {
                                getFacultyPk(params);
                                params.func = 'updateFacultyPosition';
                                return params;
                            },
                            success: function () {
                                getFacultyUser();
                            }
                        }
                    }
                    ],
//                    data: response
                });
                $faculty.bootstrapTable('load', facultyUserPosition);
            }
        });
    }

    function getFacultyPk(params){
        $.each(facultyUserPosition, function (i,positionUser) {
            if(params.pk == positionUser.index){
                params.facultyId = positionUser.faculty_id;
                params.userId  = positionUser.user_id;
                params.position  = positionUser.position;
            }
        });
        return params;
    }

    //เพิ่มผู้บริหารคณะ
    $(document).ready(function () {
        $("#addPositionUser").submit(function () {
            var data = $(this).serialize() + '&' + $.param({func: 'addPositionUser', faculty_id: user.faculty_id});
            $.ajax({
                type: 'POST',
                url: 'userDAO.php',
                data: data,
                dataType: 'html',
                success: function (response) {
                    if (response == "success") {
                        getFacultyUser();
                    } else {
                        var error = "<div id=\"alert\" class=\"alert alert-danger alert-dismissible col-md-11 top-15\" role=\"alert\">" +
                                "<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">" +
                                "<span aria-hidden=\"true\">&times;</span>" +
                                "</button>" +
                                "<span class=\"glyphicon glyphicon-remove-sign\" aria-hidden=\"true\"></span> " +
                                "<strong>Error!</strong> " + response +
                                "</div>";

                        $("#positionError").append(error);
                    }
                }
            });
            return false;
        });
    });

    //ลบผู้บริหารคณะ
    $(document).ready(function () {
        $faculty.on('check.bs.table uncheck.bs.table check-all.bs.table uncheck-all.bs.table', function () {
            $positionRemove.prop('disabled', !$faculty.bootstrapTable('getSelections').length);
        });
        $positionRemove.click(function () {
            var data = $faculty.bootstrapTable('getSelections');
            $.ajax({
                type: 'POST',
                url: 'userDAO.php',
                data: {func: 'removePositionUser', data: data},
                success: function () {
                    getFacultyUser();
                }
            });
            $positionRemove.prop('disabled', true);
        });
    });


    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


    /////////////////////////////////////////////////////กำหนดประธานภาค/////////////////////////////////////////////////////
    var sectorUser;
    var dataSector;
    var selectSectorUser = [];

    //sector user ของคณะที่กำหนด
    function getSectorUser() {
        $.ajax({
            type: 'POST',
            url: 'userDAO.php',
            data: {func: 'getSectorUser', val: user.faculty_id},
            dataType: 'json',
            success: function (response) {
                sectorUser = response;
                getSector();
            }
        })
    }

    //Table ภาควิชา และ ประธานภาควิชา
    $sector = $('#sec_pre');
    function getSector() {
        var i = 0;
        $.ajax({
            type: 'POST',
            url: 'userDAO.php',
            data: {func: 'getSector', val: user.faculty_id},
            dataType: 'json',
            success: function (response) {
                dataSector = response;
                $sector.bootstrapTable({
                    columns: [{
                        field: 'sector_id',
                        title: 'ภาควิชา',
                        width: '45%'
                    }, {
                        field: 'sector_president_id',
                        title: 'หัวหน้าภาควิชา',
                        editable: {
                            type: 'select2',
                            title: 'Select sector president',
                            url: 'userDAO.php',
                            name: 'sector_president_id',
                            emptytext: 'ไม่มีหัวหน้าภาควิชา',
                            inputclass: 'selectWidth',
                            source: function () {
                                if (i >= dataSector.length) {
                                    i = 0;
                                }

                                var curSector = dataSector[i].sector_id;
                                var curSecPre = dataSector[i].sector_president_id;

                                SelectSectorUser();

                                //user ของภาคนั้น
                                function SelectSectorUser() {
                                    selectSectorUser = [];
                                    var checkPre = false;
                                    $.each(sectorUser, function (j, user) {
                                        if (curSector == user.sector_id) {
                                            selectSectorUser.push({
                                                'id': user.user_id,
                                                'text': user.name + " " + user.surname
                                            });

                                            if (curSecPre == user.user_id || curSecPre == null) {
                                                checkPre = true;
                                            }
                                        }
                                    });

                                    if (checkPre == false) {
                                        $.ajax({
                                            type: 'POST',
                                            url: 'userDAO.php',
                                            data: {func: 'setNullSectorUser', pk: curSector}
                                        });
                                    }
                                }


                                i++;
                                return selectSectorUser;
                            },
                            params: function func(params) {
                                params.func = 'updateSectorUser';
                                return params;
                            },
                            success: function () {
                                getSectorUser();
                            }
                        }
                    }
                    ],
//                    data: dataSector
                });
                i = 0;
                $sector.bootstrapTable('load', dataSector);
            }
        });
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


    ////////////////////////////////////////////////////กำหนดประธานสาขา//////////////////////////////////////////////////////
    var majorUser;
    var dataMajor;
    var selectMajorUser;
    $major = $('#major_pre');

    //sector user ของคณะที่กำหนด
    function getMajorUser() {
        $.ajax({
            type: 'POST',
            url: 'userDAO.php',
            data: {func: 'getMajorUser', val: user.faculty_id},
            dataType: 'json',
            success: function (response) {
                majorUser = response;
                getMajor();
            }
        });
    }


    //data major and pre
    function getMajor() {
//        var i = 0;
        $.ajax({
            type: 'POST',
            url: 'userDAO.php',
            data: {func: 'getMajor', val: user.faculty_id},
            dataType: 'json',
            success: function (response) {

                dataMajor = response;
                majorTable();
            }
        });
    }

    //Table สาขา และ ประธานสาขา
    function majorTable() {
        var i = 0;
        $major.bootstrapTable({
            columns: [{
                field: 'major_id',
                title: 'สาขา',
                sortable: true,
                width: '45%'
            }, {
                field: 'major_president_id',
                title: 'หัวหน้าสาขา',
                sortable: true,
                editable: {
                    type: 'select2',
                    title: 'Select major president',
                    url: 'userDAO.php',
                    name: 'major_president_id',
                    emptytext: 'ไม่มีหัวหน้าสาขา',
                    inputclass: 'selectWidth',
                    source: function () {
                        if (i >= dataMajor.length) {
                            i = 0;
                        }
                        var curMajor = dataMajor[i].major_id;
                        var curPre = dataMajor[i].major_president_id;

                        SelectMajorUser();

                        function SelectMajorUser() {
                            selectMajorUser = [];
                            var checkPre = false;

                            $.each(majorUser, function (j, user) {
                                if (curMajor == user.major_id) {
                                    selectMajorUser.push({
                                        'id': user.user_id,
                                        'text': user.name + " " + user.surname
                                    });

                                    if (curPre == user.user_id || curPre == null) {
                                        checkPre = true;
                                    }
                                }

                            });

                            if (checkPre == false) {
                                $.ajax({
                                    type: 'POST',
                                    url: 'userDAO.php',
                                    data: {func: 'setNullMajorUser', pk: curMajor}
                                });
                            }
                        }
//                        userMajor();
//
//                        //user ของสาขานั้น
//                        function userMajor() {
//                            $.each(majorUser, function (j, user) {
//                                if (curMajor == user.major_id) {
//                                    selectMajorUser.push({
//                                        'id': user.user_id,
//                                        'text': user.name + " " + user.surname
//                                    });
//                                }
//
//                            });
//                            checkMajorPre(selectMajorUser);
//                        }
//
//                        //เช็คประธาน
//                        function checkMajorPre(selectMajorUser){
//                            var checkPre = false;
//                            console.log("----------------------------------------");
//                            $.each(selectMajorUser, function (k, user) {
//                                console.log(curMajor);
//                                console.log(curPre+" == "+user.id);
//                                if (curPre == user.id || curPre == null) {
//                                    checkPre = true;
//                                    console.log(checkPre);
//                                }
//                            });
//
//                            removePre(checkPre);
//                        }
//
//                        //ลบประธานทิ้ง ถ้าเกิดมีการย้ายประธาน
//                        function removePre(checkPre) {
//                            if (checkPre == false) {
//                                console.log("Inremove "+curMajor);
//                                $.ajax({
//                                    type: 'POST',
//                                    url: 'userDAO.php',
//                                    data: {func: 'setNullMajorUser', pk: curMajor}
//                                });
//                            }
//                        }

                        i++;
                        return selectMajorUser;
                    },
                    params: function func(params) {
                        params.func = 'updateMajorUser';
                        return params;
                    },
                    success: function () {
                        getMajorUser();
                    }
                }
            }
            ],
//            data: dataMajor
        });
        i = 0;
        $major.bootstrapTable('load', dataMajor);
    }

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


</script>

<div class="container-fluid">

    <div class="page-header">
        <h1><i class="glyphicon glyphicon-file"></i> หน้ากำหนดบัญชีผู้ใช้ <small>(ผู้ดูแลระบบของคณะ)</small></h1>
    </div>


    <div class="row">
        <form class="form-inline" id="addUser">
            <div class="form-group left-20">
                <label for="name"><h4>Name : </h4></label>
                <input type="text" class="form-control" name="name" id="name" placeholder="name" required="required">

            </div>
            <div class="form-group left-20">
                <label for="surname"><h4>Surname : </h4></label>
                <input type="text" class="form-control" name="surname" id="surname" placeholder="surname"
                       required="required">
            </div>

            <div class="form-group left-20">
                <label for="user_id"><h4>Email : </h4></label>
                <input type="email" class="form-control" name="user_id" id="user_id" placeholder="email"
                       required="required">
            </div>

            <div class="form-group left-20">
                <label for="select"><h4>Select : </h4></label>
                <select class="selectpicker" name="selected" data-live-search="true" id="select" title="เลือกสาขา">

                </select>
            </div>

            <div class="form-group left-20">
                <label class="checkbox-inline">
                    <input type="checkbox" name="sector_admin" value="1"> ผู้ดูแลระบบของภาควิชา
                </label>
            </div>

            <div class="form-group left-10">
                <label class="checkbox-inline">
                    <input type="checkbox" name="major_admin" value="1"> ผู้ดูแลระบบของสาขา
                </label>
            </div>

            <button class="btn btn-primary left-20">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add User
            </button>

            <div id="error"></div>
        </form>
    </div>

    <div class="row top-20 right-20">
        <div class="col-md-12">

            <div id="toolbar">
                <button id="remove" class="btn btn-danger" disabled>
                    <i class="glyphicon glyphicon-remove"></i> Delete
                </button>
            </div>

            <table id="table"
                   data-id-field="user_id"
                   data-toggle="table"
                   data-pagination="true"
                   data-search="true"
                   data-show-pagination-switch="true"
                   data-toolbar="#toolbar"
                   data-show-columns="true"
                   data-page-size="15"
                   data-page-list="[15, 30, 50, 100]"
                   data-height="712">

                <!--<thead>-->
                <!--<tr>-->
                <!--<th data-width="10px" data-align="center">ลำดับ</th>-->
                <!--<th	data-field="name" data-width="28%"  data-editable="true">ชื่อ</th>-->
                <!--<th data-field="surname" data-width="28%">นามสกุล</th>-->
                <!--<th data-field="email">อีเมล์</th>-->
                <!--</tr>-->
                <!--</thead>-->

                <!--<tbody>-->

                <!--</tbody>-->

            </table>
        </div>
    </div>

    <div class="row top-20 right-20">
        <div class="col-md-12">

            <!--<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">-->

            <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="headingOne">
                    <h4 class="panel-title">
                        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
                           href="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                            <strong>กำหนดผู้บริหารคณะ</strong>
                        </a>
                    </h4>
                </div>
                <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel"
                     aria-labelledby="headingOne">
                    <div class="panel-body">

                        <div class="row">
                            <form class="form-inline" id="addPositionUser">

                                <div class="form-group left-20">
                                    <label for="facultyUserSelect">ผู้บริหาร : </label>
                                    <select class="selectpicker" name="user_id" data-size="10" data-live-search="true" id="facultyUserSelect" title="เลือกผู้บริหาร">

                                    </select>
                                </div>

                                <div class="form-group left-20">
                                    <label for="positionSelect">ต่ำแหน่ง : </label>
                                    <select class="selectpicker" name="position" data-live-search="true" id="positionSelect" title="เลือกต่ำแหน่ง">

                                    </select>
                                </div>

                                <button class="btn btn-primary left-20">
                                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> เพิ่มผู้บริหารคณะ
                                </button>

                                <div id="positionError" class="left-20"></div>

                            </form>
                        </div>

                        <div class="top-20"></div>

                        <div id="positionToolbar">
                            <button id="positionRemove" class="btn btn-danger" disabled>
                                <i class="glyphicon glyphicon-remove"></i> Delete
                            </button>
                        </div>
                        <table id="fac_pre" data-id-field="index" data-toolbar="#positionToolbar">
                        </table>

                    </div>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="headingTwo">
                    <h4 class="panel-title">
                        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
                           href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            <strong>กำหนดหัวหน้าภาควิชา</strong>
                        </a>
                    </h4>
                </div>

                <div id="collapseTwo" class="panel-collapse collapse in" role="tabpanel"
                     aria-labelledby="headingTwo">
                    <div class="panel-body">

                        <table id="sec_pre" data-id-field="sector_id">
                            <!--<thead>-->
                            <!--<tr>-->
                            <!--<th data-field="sector_id" data-align="center">ภาควิชา</th>-->
                            <!--<th data-field="sector_president_id" data-editable="true">ประธานภาควิชา</th>-->
                            <!--</tr>-->
                            <!--</thead>-->

                            <!--<tbody>-->

                            <!--</tbody>-->
                        </table>

                    </div>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="headingThree">
                    <h4 class="panel-title">
                        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
                           href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            <strong>กำหนดหัวหน้าสาขา</strong>
                        </a>
                    </h4>
                </div>
                <div id="collapseThree" class="panel-collapse collapse in" role="tabpanel"
                     aria-labelledby="headingThree">
                    <div class="panel-body">

                        <table id="major_pre" data-id-field="major_id">
                            <!--<thead>-->
                            <!--<tr>-->
                            <!--<th data-field="major_id" data-align="center">สาขา</th>-->
                            <!--<th data-field="major_president_id" data-editable="true">ประธานสาขา</th>-->
                            <!--</tr>-->
                            <!--</thead>-->

                            <!--<tbody>-->

                            <!--</tbody>-->
                        </table>

                    </div>
                </div>
            </div>

            <!--</div>-->

        </div>
    </div>

</div>
